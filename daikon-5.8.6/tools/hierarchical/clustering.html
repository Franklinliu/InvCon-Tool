<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html40/loose.dtd">
<html><head><title>Data Clustering</title>


  
  <meta name="description" content="Utilities for performing clustering
      on vector data or diffenrence data, creating dendrograms.">
  <meta name="keywords" content="clustering, single link, complete link,
      nearest neighbor, Ward, dendrogram">
  <style type="text/css">
  <!--
  body {
    margin-left: 5%;
    width: 90%
  }
  // -->
  </style></head><body alink="#ff0000" bgcolor="#eeeeee" link="#0000ee" text="#000000" vlink="#551a8b">
<script><!--
if(!top.PeterCJKleiwegIndex)
    document.writeln('<small><a target="_top" href="http://www.let.rug.nl/~kleiweg/">Home<\/a><\/small><br><hr>');
// --></script><small><a target="_top" href="http://www.let.rug.nl/%7Ekleiweg/">Home</a></small><br><hr>


<h1>Data Clustering</h1>

<b>Utilities for performing clustering on vector data or difference
data, creating dendrograms.</b>
<blockquote>
This Web page offers several utilities for performing clustering on data
sets. Input can be either a set of vectors or a table with difference
values. Several programs piped together finally result in a PostScript
image of a dendrogram, or an on-screen image (Unix/X11 or MS-DOS).
</blockquote>
<dl>
<dt><b><font color="#c00000">Changes:</font></b>
</dt><dd>
<dl>
<dt>25 june 2007
</dt><dd>New option <b><tt>-s</tt></b> for <a href="#cluster">cluster</a>.
</dd><dt>16 januari 2007
</dt><dd>Added alternative names for cluster methods in the program <tt><a href="#cluster">cluster</a></tt>.
</dd><dt>10 september 2005
</dt><dd>The program <tt><a href="#cluster">cluster</a></tt> will abort if a file
<b><tt>_CANCEL_.L04</tt></b> exists in the current directory, or if it is
created while <b><tt>cluster</tt></b> is running. 
</dd><dt>18 july 2005
</dt><dd>New option <b><tt>-u</tt></b> for <tt><a href="#den">den</a></tt>.
</dd><dt>16 july 2004
</dt><dd>Replaced use of deprecated header file &lt;values.h&gt; in 
<tt><a href="#clgroup">clgroup</a></tt>,
<tt><a href="#cluster">cluster</a></tt>,
<tt><a href="#den">den</a></tt>,
<tt><a href="#denxview">denxview</a></tt>, and
<tt><a href="#difftbl">difftbl</a></tt>.
</dd><dt>30 june 2004
</dt><dd>Renaming of variable in <tt><a href="#den">den</a></tt> to solve conflict on some compilers.
</dd><dt><a href="http://www.let.rug.nl/%7Ekleiweg/clustering/changes.html">All changes</a>
</dt></dl>
</dd></dl>

The next figure is an example of a dendrogram.
<center>
<p class="center">
<img src="clustering_files/den.gif" alt="[example]" height="107" width="369">
</p></center>

<h2>Software</h2>

<ul>
<li><tt><a href="http://www.let.rug.nl/%7Ekleiweg/clustering/Makefile">Makefile</a></tt> -- Unix Makefile for all programs. <i>Updated 2004/07/16</i>
</li><li><tt><a href="http://www.let.rug.nl/%7Ekleiweg/clustering/difftbl.c">difftbl.c</a></tt> -- For conversion of
vector data into a difference table, using one of several difference measures. <i>Updated 2004/07/16</i>
</li><li><tt><a href="http://www.let.rug.nl/%7Ekleiweg/clustering/difftbl.exe">difftbl.exe</a></tt> -- Windows
executable. <i>Updated 2004/07/16</i>
</li><li><tt><a href="http://www.let.rug.nl/%7Ekleiweg/clustering/cluster.c">cluster.c</a></tt> -- Data clustering on a
difference table, using one of several algorithms. <i>Updated 2007/06/25</i>
</li><li><tt><a href="http://www.let.rug.nl/%7Ekleiweg/clustering/cluster.exe">cluster.exe</a></tt> -- Windows executable. <i>Updated 2007/06/25</i>
</li><li><tt><a href="http://www.let.rug.nl/%7Ekleiweg/clustering/den.c">den.c</a></tt> -- Program for transforming
clustering data into a PostScript image of a dendrogram. <i>Updated 2005/07/18</i>
</li><li><tt><a href="http://www.let.rug.nl/%7Ekleiweg/clustering/den.exe">den.exe</a></tt> -- Windows executable. <i>Updated 2005/07/18</i>
</li><li><tt><a href="http://www.let.rug.nl/%7Ekleiweg/clustering/denxview.c">denxview.c</a></tt> -- Unix/X11 program for transforming
clustering data into an on-screen image of a dendrogram. <i>Updated 2004/07/16</i>
</li><li><tt><a href="http://www.let.rug.nl/%7Ekleiweg/clustering/denview.exe">denview.exe</a></tt> -- MS-DOS program for transforming
clustering data into an on-screen image of a dendrogram.
</li><li><tt><a href="http://www.let.rug.nl/%7Ekleiweg/clustering/denview.c">denview.c</a></tt>, <tt><a href="http://www.let.rug.nl/%7Ekleiweg/clustering/egavga.obj">egavga.obj</a></tt>, <tt><a href="http://www.let.rug.nl/%7Ekleiweg/clustering/denview.mak">denview.mak</a></tt> -- Files for compiling
<tt>denview</tt> on MS-DOS, using Borland C 3.0. <i>Updated 2002/05/31</i>
</li><li><tt><a href="http://www.let.rug.nl/%7Ekleiweg/clustering/clgroup.c">clgroup.c</a></tt> -- Display cluster grouping. <i>Updated 2004/07/16</i>
</li><li><tt><a href="http://www.let.rug.nl/%7Ekleiweg/clustering/clgroup.exe">clgroup.exe</a></tt> -- Windows executable. <i>Updated 2004/07/16</i>
</li></ul>

<h2>Usage</h2>

All programs read input either from <tt>stdin</tt> or from a file, and
write to <tt>stdout</tt>, except for <tt>denxview</tt> and
<tt>denview</tt>. You can examine
the data files used in the examples below to learn about their syntax.
<p>
A typical usage is:
</p><p>
<tt>&nbsp;&nbsp;&nbsp;&nbsp;difftbl&nbsp;</tt><i>vector-file</i><tt>&nbsp;|&nbsp;cluster&nbsp;-w&nbsp;|&nbsp;den&nbsp;&gt;&nbsp;</tt><i>PostScript-file</i>
</p><p>
But you can substitute your own program in any part of this pipe.
</p><p>
<b><tt><a name="difftbl">difftbl</a></tt></b>
</p><p>
This program reads a file with data vectors, and produces a difference
table. The program has the following options:
</p><dl>
<dt><b><tt>-c</tt></b>
  </dt><dd>Use city block distance.
</dd><dt><b><tt>-e</tt></b>
  </dt><dd>Use Euclidean difference (default).
</dd><dt><b><tt>-p</tt></b>
  </dt><dd>Use 1 - Pearson correlation coefficient.
</dd><dt><b><tt>-s</tt></b>
  </dt><dd>Use square difference.
</dd><dt><b><tt>-o</tt></b> <i>filename</i>
  </dt><dd>Output file
</dd><dt><b><tt>-P</tt></b>
  </dt><dd>Generate pair listing
</dd></dl>
Example: 
<pre>    difftbl <a href="http://www.let.rug.nl/%7Ekleiweg/clustering/NLchars.vec">NLchars.vec</a> &gt; <a href="http://www.let.rug.nl/%7Ekleiweg/clustering/NLchars.dif">NLchars.dif</a>
</pre>
<p>
<b><tt><a name="cluster">cluster</a></tt></b>
</p><p>
This program is an implementation of seven different clustering
algorithms, which are described in:
</p><blockquote>
Anil&nbsp;K. Jain and Richard&nbsp;C. Dubes.
<br><i>Algorithms for Clustering Data</i>.
<br>Prentice Hall, Englewood Cliffs, NJ, 1988.
</blockquote>
The program reads a difference file, and creates a clustering.
<p>
The program will abort if a file <b><tt>_CANCEL_.L04</tt></b> exists in the
current directory, or if it is created while <b><tt>cluster</tt></b> is
running. This is useful for stopping long running calculations from a GUI.
</p><p>
What clustering algorithm to use is defined by the following options:
</p><dl>
<dt><b><tt>-sl</tt></b>
  </dt><dd>Single Link (Nearest Neighbor)
</dd><dt><b><tt>-cl</tt></b>
  </dt><dd>Complete Link (Furthest Neighbor)
</dd><dt><b><tt>-ga</tt></b>
  </dt><dd>Group Average (UPGMA: Unweighted Pair Group Method using Arithmetic averages)
</dd><dt><b><tt>-wa</tt></b>
  </dt><dd>Weighted Average (WPGMA: Weighted Pair Group Method using Arithmetic averages)
</dd><dt><b><tt>-uc</tt></b>
  </dt><dd>Unweighted Centroid (Centroid, UPGMC: Unweighted Pair Group Method using Centroids)
</dd><dt><b><tt>-wc</tt></b>
  </dt><dd>Weighted Centroid (Median, WPGMC: Weighted Pair Group Method using Centroids)
</dd><dt><b><tt>-wm</tt></b>
  </dt><dd>Ward's Method (Minimum Variance)
</dd></dl>
Other options:
<dl>
<dt><b><tt>-b</tt></b>
  </dt><dd>binary output. Instead of a clustering, the output is a difference file
	of times each pair of
	items was placed in different clusters. Only makes sense in combination with
	option -m.
</dd><dt><b><tt>-c</tt></b>
  </dt><dd>cophenetic output. The output is a difference file with cophenetic
	values, instead of a clustering.
</dd><dt><b><tt>-m</tt></b> <i>int</i>
</dt><dt><b><tt>-m</tt></b> <i>int</i>-<i>int</i>
</dt><dt><b><tt>-m</tt></b> <i>int</i>-<i>int</i>+<i>int</i>
  </dt><dd>maximum number of clusters for binary or cophenetic output. This option can be used
	more than once. You can define ranges of numbers, for instance:<br>
<pre>    -m 2-8
    -m 2-11+3
</pre>
The first example selects all values from 2 to 8 inclusive, the second selects
	the values 2 5 8 11.
</dd><dt><b><tt>-N</tt></b> <i>float</i>
  </dt><dd>Noise. Before clustering, all values are increased by a random value
	between zero and <i>sd</i> times the specified value, where <i>sd</i>
	is the standard deviation of all the original values. This option can
	be used more than once.
</dd><dt><b><tt>-o</tt></b> <i>filename</i>
  </dt><dd>Output file
</dd><dt><b><tt>-r</tt></b> <i>int</i>
  </dt><dd>Number of runs. Only useful if -b (or -c) and -N are used as well.
</dd><dt><b><tt>-s</tt></b> <i>int</i>
  </dt><dd>Seed for random number generator.
</dd><dt><b><tt>-u</tt></b>
  </dt><dd>Unsorted
</dd></dl>
<p>
Example:
</p><pre>    cluster -wm <a href="http://www.let.rug.nl/%7Ekleiweg/clustering/NLchars.dif">NLchars.dif</a> &gt; <a href="http://www.let.rug.nl/%7Ekleiweg/clustering/NLchars.clu">NLchars.clu</a>
</pre>
<p>
Please note the order of the data in the input file. Lines starting with
a hash (#) are only comments. They do not define the order of the data.
</p><p>
<b><tt><a name="den">den</a></tt></b>
</p><p>
This program transforms a clustering file into a PostScript image of a
dendrogram. Labels in the input data may contain all characters from the
<a href="http://www.let.rug.nl/%7Ekleiweg/faq/ISOLatin1.ps">ISO Latin 1</a> character set. The
program has the following options:
</p><dl>


<dt><b><tt>-2</tt></b>
  </dt><dd>Produce PostScript Level 2, that is, assume the
  <tt>ISOLatin1Encoding</tt> array has already been defined.
</dd><dt><b><tt>-a</tt></b>
  </dt><dd>Curved links (default: rectangular).
</dd><dt><b><tt>-b </tt></b> <i>float</i>
  </dt><dd>Usually, 0 is used as the offset, or the minimum value in the
  clustering data if that value is negative. You can use this option to
  define the offset yourself.
</dd><dt><b><tt>-c</tt></b>
  </dt><dd>Color links (with number of groups from 2 through 19). The colors
  corresponds to those used by the program <b><tt>mapclust</tt></b>,
  part of the <a href="http://www.let.rug.nl/%7Ekleiweg/L04/">RuG/L04</a> package.
</dd><dt><b><tt>-C</tt></b>
  </dt><dd>Color labels (with number of groups from 2 through 19). The colors
  corresponds to those used by the program <b><tt>mapclust</tt></b>,
  part of the <a href="http://www.let.rug.nl/%7Ekleiweg/L04/">RuG/L04</a> package.
</dd><dt><b><tt>-e</tt></b> <i>float</i>
  </dt><dd>Exponent (default: 1.0). The cluster values are raised to this
  exponent. The values on the ruler are adjusted likewise. For example,
  to get the square root of the values, use: <tt>-e&nbsp;.5</tt>
</dd><dt><b><tt>-E</tt></b>
  </dt><dd>Print an example cluster file.
</dd><dt><b><tt>-f</tt></b> <i>int</i>
  </dt><dd>Fontsize (default: 8).
</dd><dt><b><tt>-h</tt></b>
  </dt><dd> use rainbow colours, light and dark, instead of standard colours
  (no limit to number of groups)
</dd><dt><b><tt>-H</tt></b>
  </dt><dd>use rainbow colours, light, instead of standard colours
  (no limit to number of groups)
</dd><dt><b><tt>-I</tt></b>
  </dt><dd>Cluster numbers (implies: -L).
</dd><dt><b><tt>-L</tt></b>
  </dt><dd>No labels.
</dd><dt><b><tt>-n</tt></b> <i>int</i>
  </dt><dd>Number of groups (default: 1). The dendrogram will be split in a
  number of groups, with extra space between the groups. This
  option is required if you want colors or patterns.
</dd><dt><b><tt>-o</tt></b> <i>filename</i>
  </dt><dd>output file
</dd><dt><b><tt>-p</tt></b>
  </dt><dd>Placement of labels in two columns,
  making room for twice the number of labels.
</dd><dt><b><tt>-P</tt></b>
  </dt><dd>Patterns (implies: -2 -L, with number of groups from 2 through 19). The patterns
  corresponds to those used by the program <b><tt>mapclust</tt></b>,
  part of the <a href="http://www.let.rug.nl/%7Ekleiweg/L04/">RuG/L04</a> package.
</dd><dt><b><tt>-Q</tt></b>
  </dt><dd>Symbols (implies: -2, with number of groups from 2 through 19). The symbols
  corresponds to those used by the program <b><tt>mapclust</tt></b>,
  part of the <a href="http://www.let.rug.nl/%7Ekleiweg/L04/">RuG/L04</a> package.
</dd><dt><b><tt>-r</tt></b> <i>float</i>
  </dt><dd>Line skip for ruler (in points, 1 point = 1/72 inch).
</dd><dt><b><tt>-R</tt></b>
  </dt><dd>No ruler.
</dd><dt><b><tt>-s</tt></b> <i>float</i>
  </dt><dd>Line skip within groups (in points, 1 point = 1/72 inch).
</dd><dt><b><tt>-S</tt></b> <i>float</i>
  </dt><dd>Line skip between groups, see option <tt>-n</tt> (in points, 1 point = 1/72 inch).
</dd><dt><b><tt>-t</tt></b>
  </dt><dd>Triangular links (default: rectangular).
</dd><dt><b><tt>-T</tt></b>
  </dt><dd>Font Times-Roman (default: Helvetica). Helvetica usually looks
  better in diagrams, Times-Roman in running text. The old version of
  <tt>den</tt> used Times-Roman.
</dd><dt><b><tt>-u</tt></b> <i>filename</i>
  </dt><dd>User-defined colours. Instead of using built-in colours, read colours
	from a file. Each line in the file should have three values, separated
	by white-space. These are the red, green, and blue components. The
	values should be in the range 0 to 1, or in the range 0 to 255.
</dd></dl>
<p>
Example:
</p><pre>    den <a href="http://www.let.rug.nl/%7Ekleiweg/clustering/NLchars.clu">NLchars.clu</a> &gt; <a href="http://www.let.rug.nl/%7Ekleiweg/clustering/NLchars.ps">NLchars.ps</a>
</pre>

Below is an example created with the options <tt>-b.1 -c -e.5 -L -n4</tt>
<p>
</p><center>
<img src="clustering_files/den-exp.gif">
</center>

<p>
<b><tt><a name="denxview">denxview</a></tt></b>
</p><p>
This program (Unix only) reads a clustering file and displays a
dendrogram in a window on the X11 display. To quit the program, type
'q' in the window. Options:
</p><dl>
<dt><b><tt>-b </tt></b> <i>float</i>
  </dt><dd>See: <tt>den</tt>.
</dd><dt><b><tt>-f </tt></b> <i>fontname</i>
  </dt><dd>A valid X11 font name. For really large dendrograms you could use
  a <tt>5x8</tt> font.
</dd></dl>

<p>
<b><tt><a name="denview">denview</a></tt></b>
</p><p>
This program (MS-DOS only) reads a clustering file and displays a
dendrogram on a VGA terminal. Option:
</p><dl>
<dt><b><tt>-b </tt></b> <i>float</i>
  </dt><dd>See: <tt>den</tt>.
</dd></dl>

<p>
<b><tt><a name="clgroup">clgroup</a></tt></b>
</p><p>
This program prints a cluster grouping from a cluster file. Options:
</p><dl>
<dt><b><tt>-n </tt></b> <i>int</i>
  </dt><dd>Number of groups
</dd><dt><b><tt>-i</tt></b>
  </dt><dd>Indexed output
</dd><dt><b><tt>-o</tt></b> <i>filename</i>
  </dt><dd>Output file
</dd></dl>
With indexed output, labels are "quoted" if there are spaces or tabs in the
labels, or if the label starts with a quote.
<p>
Examples:
</p><pre>    clgroup -n 3 <a href="http://www.let.rug.nl/%7Ekleiweg/clustering/NLchars.clu">NLchars.clu</a> &gt; <a href="http://www.let.rug.nl/%7Ekleiweg/clustering/NLchars.txt">NLchars.txt</a>
    clgroup -n 3 -i <a href="http://www.let.rug.nl/%7Ekleiweg/clustering/NLchars.clu">NLchars.clu</a> &gt; <a href="http://www.let.rug.nl/%7Ekleiweg/clustering/NLchars-i.txt">NLchars-i.txt</a>
</pre>

<h2>Example clustering file</h2>

<p>The next example is used to illustrate the syntax of a clustering
definition. It describes the dendrogram in the figure at the top of this document.

</p><pre>    # Example cluster file

    1 .12
    L Norwegian
    L Swedish

    2 .15
    C 1
    L Danish

    3 .3
    L Dutch
    L German

    4 .35 Nordic group
    L Icelandic
    C 2

    5 .7
    C 4
    C 3
</pre>

<p>Empty lines are ignored. Anything starting with <tt>#</tt> is treated as
a comment.
</p><p>
A clustering definition is a set of descriptions of clusters. Each
cluster has an index number, a value, and two links to either other
clusters or to labels. There can also be an optional textual comment.
</p><p>
Each cluster is defined in three lines.
</p><ol>
<li>The first lines contains a number used for identification. Each
cluster needs an unique integer index number.<br>
Following the index is a value that defines the difference between the
two sub-clusters or labels.<br>
Any text following the difference value is treated as a description to
be added to this particular cluster.
</li><li>The second lines describes what the first item of this
cluster is. It can be either a sub-cluster or a label.<br>
A sub-cluster is indicated with a letter <tt>C</tt> followed by the
index number of that sub-cluster.<br>
A label is indicated with a letter <tt>L</tt> followed be the text of
the label itself.
</li><li>The third line describes the second item of this cluster. The
syntax is identical to the second line.
</li></ol>
<p>
Cluster definitions can be given in any order. Swapping the second and
third line in a definition swaps the two branches of this cluster in the
output figure.

</p><p>Compare the items in the above example to the figure.<br>
Cluster number 1 has two labels, Norwegian and Swedish.
This cluster is indicated in the figure by the line
connecting Norwegian to Swedish.<br>
Cluster number 4 has one label, Icelandic and a sub-cluster with number
2. It connects the label Icelandic to the cluster containing Norwegian,
Swedish and Danish. The description 'Nordic group' is placed at the
right of the connecting line.<br>
Cluster number 5 has two sub-clusters. It connects the cluster containing
the Nordic group to the cluster containing Dutch and German.

</p><h2>How to use the PostScript figure</h2>

<p>The PostScript figure produced by the program <b><tt>den</tt></b> can be
used in various ways.
</p><ul>
<li>It can be printed directly on a PostScript printer.
</li><li>It can be printed on a matrix printer with the help of a PostScript
interpreter such as <b><tt>ghostscript</tt></b>.
</li><li>It can be viewed on screen with a PostScript viewer such as
<b><tt>ghostview</tt></b> or <b><tt>gv</tt></b>.
</li><li>It can be <a href="http://www.let.rug.nl/%7Ekleiweg/postscript/postscript.html#conversion">converted to an
image</a>, for instance with
<b><tt>ghostscript</tt></b>.
</li><li>It can be incorporated in a document, for instance in LaTeX, using
the <tt>dvips/psfig</tt> package.
</li><li>It can be modified with a text editor, scaled, rotated, added to
</li></ul>

<p>Ghostscript, ghostview, gv, LaTeX and dvips are available free for many
computer platforms.


<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:nil
sgml-declaration:"HTML4.01/HTML4.decl"
End:
-->
</p></body></html>
